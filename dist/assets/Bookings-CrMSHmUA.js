import{_ as H,u as N,r as a,k as _,l as I,c as l,b as t,j,t as i,f,v as q,x,a as S,s as h,d as Y,w as E,h as G,F as D,n as O,q as b,o as r,g as m}from"./index-DYB-CqZx.js";const R={class:"bookings-container"},Q={class:"bookings-header"},W={class:"header-content"},J={class:"subtitle"},K={key:0,class:"search-controls"},X={class:"search-bar"},Z={class:"filter-controls"},ee={class:"filter-dropdown"},te={class:"filter-dropdown"},oe={class:"filter-dropdown"},se={class:"filter-dropdown"},ne={class:"view-toggle"},le={key:1,class:"results-counter"},re={class:"counter-text"},ie={key:2,class:"loading-container"},ae={key:3,class:"error-container"},de={key:4,class:"empty-state"},ue={class:"booking-header"},ce={class:"property-info"},ve={key:0,class:"badge-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pe={key:1,class:"badge-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ke={key:2,class:"badge-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},he={class:"booking-details"},ge={class:"detail-item"},we={class:"detail-value"},fe={class:"detail-item"},me={class:"detail-value"},ye={class:"detail-item"},Me={class:"detail-value"},Be={class:"detail-item"},Ce={class:"detail-value"},_e={class:"price-section"},xe={class:"price-amount"},De={class:"status-icon-container"},Ve={key:0,class:"status-message-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},je={key:1,class:"status-message-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},be={key:2,class:"status-message-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ze={class:"status-text"},Fe={__name:"Bookings",setup(Se){const L=N(),d=a([]),g=a(!0),c=a(""),v=_(()=>{var s;return((s=L.user)==null?void 0:s.role)||"guest"}),A=_(()=>v.value==="admin"?"All Bookings":v.value==="host"?"Property Bookings":"My Bookings"),$=_(()=>v.value==="admin"?"View and manage all platform bookings":v.value==="host"?"View and manage booking requests for your properties":"Track your upcoming and past reservations"),p=a(""),y=a("all"),M=a("all"),B=a("all"),V=a("recent"),k=a("grid"),z=_(()=>{let s=[...d.value];if(p.value.trim()){const e=p.value.toLowerCase();s=s.filter(n=>{const o=String(n.property_id||"").toLowerCase(),w=C(n.check_in).toLowerCase(),u=C(n.check_out).toLowerCase(),T=String(n.total_price||"").toLowerCase();return o.includes(e)||w.includes(e)||u.includes(e)||T.includes(e)})}if(y.value!=="all"&&(s=s.filter(e=>e.status===y.value)),M.value!=="all"&&(s=s.filter(e=>{const n=parseFloat(e.total_price)||0;switch(M.value){case"under200":return n<200;case"200-500":return n>=200&&n<=500;case"500-1000":return n>=500&&n<=1e3;case"over1000":return n>1e3;default:return!0}})),B.value!=="all"){const e=new Date,n=e.getMonth(),o=e.getFullYear();s=s.filter(w=>{const u=new Date(w.check_in);switch(B.value){case"upcoming":return u>=e;case"past":return u<e;case"thisMonth":return u.getMonth()===n&&u.getFullYear()===o;default:return!0}})}return s.sort((e,n)=>{switch(V.value){case"recent":return new Date(n.created_at)-new Date(e.created_at);case"checkin-earliest":return new Date(e.check_in)-new Date(n.check_in);case"checkin-latest":return new Date(n.check_in)-new Date(e.check_in);case"price-low":return(parseFloat(e.total_price)||0)-(parseFloat(n.total_price)||0);case"price-high":return(parseFloat(n.total_price)||0)-(parseFloat(e.total_price)||0);default:return 0}}),s}),F=async()=>{try{g.value=!0,c.value="";let s;v.value==="host"?(console.log("Fetching host bookings..."),s=await b.getHostBookings()):v.value==="admin"?(console.log("Fetching all bookings (admin)..."),s=await b.getAllBookings()):(console.log("Fetching user bookings (guest)..."),s=await b.getUserBookings()),d.value=s.data||[],console.log("Bookings loaded:",d.value)}catch(s){console.error("Error loading bookings:",s),c.value="Failed to load bookings. Please try again.",d.value=[]}finally{g.value=!1}},C=s=>{const e={weekday:"short",month:"short",day:"numeric",year:"numeric"};return new Date(s).toLocaleDateString("en-US",e)},P=s=>{const e={month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(s).toLocaleDateString("en-US",e)},U=(s,e)=>{const n=new Date(s),o=new Date(e),w=Math.abs(o-n);return Math.ceil(w/(1e3*60*60*24))};return I(()=>{F()}),(s,e)=>{const n=G("router-link");return r(),l("div",R,[t("div",Q,[t("div",W,[t("div",null,[t("h1",null,i(A.value),1),t("p",J,i($.value),1)])])]),!g.value&&!c.value&&d.value.length>0?(r(),l("div",K,[t("div",X,[e[9]||(e[9]=t("svg",{class:"search-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>p.value=o),type:"text",placeholder:"Search by property ID, dates, or price...",class:"search-input"},null,512),[[q,p.value]]),p.value?(r(),l("button",{key:0,onClick:e[1]||(e[1]=o=>p.value=""),class:"clear-search"},[...e[8]||(e[8]=[t("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):j("",!0)]),t("div",Z,[t("div",ee,[f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>y.value=o),class:"filter-select"},[...e[10]||(e[10]=[t("option",{value:"all"},"All Statuses",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"accepted"},"Accepted",-1),t("option",{value:"declined"},"Declined",-1)])],512),[[x,y.value]]),e[11]||(e[11]=t("svg",{class:"dropdown-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),t("div",te,[f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>M.value=o),class:"filter-select"},[...e[12]||(e[12]=[S('<option value="all" data-v-e89fdd2c>All Prices</option><option value="under200" data-v-e89fdd2c>Under $200</option><option value="200-500" data-v-e89fdd2c>$200-$500</option><option value="500-1000" data-v-e89fdd2c>$500-$1000</option><option value="over1000" data-v-e89fdd2c>Over $1000</option>',5)])],512),[[x,M.value]]),e[13]||(e[13]=t("svg",{class:"dropdown-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),t("div",oe,[f(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>B.value=o),class:"filter-select"},[...e[14]||(e[14]=[t("option",{value:"all"},"All Dates",-1),t("option",{value:"upcoming"},"Upcoming",-1),t("option",{value:"past"},"Past",-1),t("option",{value:"thisMonth"},"This Month",-1)])],512),[[x,B.value]]),e[15]||(e[15]=t("svg",{class:"dropdown-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),t("div",se,[f(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>V.value=o),class:"filter-select"},[...e[16]||(e[16]=[S('<option value="recent" data-v-e89fdd2c>Recent</option><option value="checkin-earliest" data-v-e89fdd2c>Check-in: Earliest First</option><option value="checkin-latest" data-v-e89fdd2c>Check-in: Latest First</option><option value="price-low" data-v-e89fdd2c>Price: Low to High</option><option value="price-high" data-v-e89fdd2c>Price: High to Low</option>',5)])],512),[[x,V.value]]),e[17]||(e[17]=t("svg",{class:"dropdown-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),t("div",ne,[t("button",{onClick:e[6]||(e[6]=o=>k.value="grid"),class:h(["toggle-btn",{active:k.value==="grid"}]),title:"Grid View"},[...e[18]||(e[18]=[t("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),t("button",{onClick:e[7]||(e[7]=o=>k.value="list"),class:h(["toggle-btn",{active:k.value==="list"}]),title:"List View"},[...e[19]||(e[19]=[t("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])],2)])])])):j("",!0),!g.value&&!c.value&&d.value.length>0?(r(),l("div",le,[t("span",re,i(z.value.length)+" bookings found",1)])):j("",!0),g.value?(r(),l("div",ie,[...e[20]||(e[20]=[t("div",{class:"spinner-large"},null,-1),t("p",null,"Loading your bookings...",-1)])])):c.value?(r(),l("div",ae,[e[21]||(e[21]=t("svg",{class:"error-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",null,i(c.value),1),t("button",{onClick:F,class:"btn-retry"},"Try Again")])):d.value.length===0?(r(),l("div",de,[e[23]||(e[23]=t("div",{class:"empty-icon"},[t("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e[24]||(e[24]=t("h3",null,"No bookings yet",-1)),e[25]||(e[25]=t("p",null,"You haven't made any booking requests yet. Start exploring amazing properties!",-1)),Y(n,{to:"/dashboard",class:"btn-primary"},{default:E(()=>[...e[22]||(e[22]=[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),m(" Browse Properties ",-1)])]),_:1})])):(r(),l("div",{key:5,class:h(["bookings-container-view",k.value==="list"?"bookings-list":"bookings-grid"])},[(r(!0),l(D,null,O(z.value,o=>(r(),l("div",{key:o.id,class:h(["booking-card",k.value==="list"?"list-card":""])},[t("div",ue,[t("div",ce,[e[26]||(e[26]=t("svg",{class:"property-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1)),t("h3",null,"Property #"+i(o.property_id),1)]),t("span",{class:h(["status-badge",`status-${o.status}`])},[o.status==="pending"?(r(),l("svg",ve,[...e[27]||(e[27]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):o.status==="accepted"?(r(),l("svg",pe,[...e[28]||(e[28]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):(r(),l("svg",ke,[...e[29]||(e[29]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])),m(" "+i(o.status.charAt(0).toUpperCase()+o.status.slice(1)),1)],2)]),t("div",he,[t("div",ge,[e[30]||(e[30]=t("div",{class:"detail-label"},[t("svg",{class:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),t("span",null,"Check-in")],-1)),t("div",we,i(C(o.check_in)),1)]),t("div",fe,[e[31]||(e[31]=t("div",{class:"detail-label"},[t("svg",{class:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),t("span",null,"Check-out")],-1)),t("div",me,i(C(o.check_out)),1)]),t("div",ye,[e[32]||(e[32]=t("div",{class:"detail-label"},[t("svg",{class:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("span",null,"Duration")],-1)),t("div",Me,i(U(o.check_in,o.check_out))+" nights",1)]),t("div",Be,[e[33]||(e[33]=t("div",{class:"detail-label"},[t("svg",{class:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("span",null,"Booked on")],-1)),t("div",Ce,i(P(o.created_at)),1)])]),t("div",_e,[e[34]||(e[34]=t("div",{class:"price-label"},"Total Price",-1)),t("div",xe,"A$"+i(parseFloat(o.total_price).toFixed(2)),1)]),t("div",{class:h(["status-message",`status-message-${o.status}`])},[t("div",De,[o.status==="pending"?(r(),l("svg",Ve,[...e[35]||(e[35]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):o.status==="accepted"?(r(),l("svg",je,[...e[36]||(e[36]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):(r(),l("svg",be,[...e[37]||(e[37]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))]),t("div",ze,[o.status==="pending"?(r(),l(D,{key:0},[m(" Waiting for host approval ")],64)):o.status==="accepted"?(r(),l(D,{key:1},[m(" Booking confirmed! Get ready for your stay ")],64)):(r(),l(D,{key:2},[m(" This booking request was declined ")],64))])],2)],2))),128))],2))])}}},Ae=H(Fe,[["__scopeId","data-v-e89fdd2c"]]);export{Ae as default};
