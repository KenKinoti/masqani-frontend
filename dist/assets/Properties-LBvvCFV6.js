import{_ as ie,u as ae,r as d,k as p,l as de,c as r,b as e,j as v,m as ue,t as i,w as L,h as ve,f as k,v as j,x as H,a as Z,s as z,d as q,F as Q,n as ce,g as c,e as N,y as Y,p as J,q as pe,i as ke,o as n}from"./index-DYB-CqZx.js";const fe={class:"dashboard-container"},ge={class:"dashboard-header"},me={class:"header-content"},we={class:"subtitle"},he={key:0,class:"search-controls"},ye={class:"search-bar"},be={class:"filter-controls"},Ce={class:"filter-dropdown"},Me={class:"filter-dropdown"},_e={class:"filter-dropdown"},Be={class:"view-toggle"},xe={key:1,class:"results-counter"},Ve={class:"counter-text"},je={key:2,class:"loading-container"},Pe={key:3,class:"error-container"},Ae={key:4,class:"empty-state"},$e={class:"property-image-container"},Le={key:1,class:"property-image property-placeholder"},ze={class:"property-content"},De={class:"property-header"},Fe={class:"property-title"},Se={class:"property-price"},Te={class:"price-amount"},He={class:"property-location"},qe={class:"property-description"},Ne={class:"property-stats"},Ue={class:"stat"},Ie={class:"stat"},Oe={class:"property-actions"},Re=["onClick"],Ee=["onClick"],Ge={class:"modal-header"},Ze={class:"modal-body"},Qe={class:"modal-footer"},Ye={class:"modal-header"},Je={class:"modal-body"},Ke={class:"booking-property-info"},We={class:"booking-details"},Xe={class:"booking-address"},et={class:"booking-price"},tt={class:"form-group"},ot=["min"],st={class:"form-group"},lt=["min"],nt={class:"form-group"},rt={class:"form-group"},it={key:0,class:"error-message"},at={key:1,class:"total-price"},dt={class:"modal-footer"},ut=["disabled"],vt={__name:"Properties",setup(ct){const K=ae(),W=ke(),f=d([]),C=d(!0),m=d(""),w=d(!1),M=d(null),D=d(!1),u=d(null),P=d(!1),g=d(""),a=d({check_in_date:"",check_out_date:"",guests:1,notes:""}),U=p(()=>new Date().toISOString().split("T")[0]),_=p(()=>{if(!a.value.check_in_date||!a.value.check_out_date)return 0;const s=new Date(a.value.check_in_date),l=new Date(a.value.check_out_date)-s;return Math.ceil(l/(1e3*60*60*24))}),X=p(()=>!u.value||_.value<=0?0:(parseFloat(u.value.price)*_.value).toFixed(2)),h=p(()=>{var s;return((s=K.user)==null?void 0:s.role)||"guest"}),F=p(()=>h.value==="host"||h.value==="admin"),ee=p(()=>h.value==="admin"?"All Properties":h.value==="host"?"My Properties":"Browse Properties"),te=p(()=>h.value==="admin"?"Manage all platform properties":h.value==="host"?"Manage your property listings":"Discover your next stay"),y=d(""),A=d("all"),S=d("all"),T=d("recent"),b=d("grid"),I=p(()=>{let s=[...f.value];if(y.value.trim()){const t=y.value.toLowerCase();s=s.filter(l=>{var B,x,V;return((B=l.title)==null?void 0:B.toLowerCase().includes(t))||((x=l.address)==null?void 0:x.toLowerCase().includes(t))||((V=l.description)==null?void 0:V.toLowerCase().includes(t))})}return A.value!=="all"&&(s=s.filter(t=>{const l=parseFloat(t.price)||0;switch(A.value){case"under100":return l<100;case"100-200":return l>=100&&l<=200;case"200-400":return l>=200&&l<=400;case"over400":return l>400;default:return!0}})),S.value,s.sort((t,l)=>{switch(T.value){case"recent":return l.id-t.id;case"price-low":return(parseFloat(t.price)||0)-(parseFloat(l.price)||0);case"price-high":return(parseFloat(l.price)||0)-(parseFloat(t.price)||0);case"title-asc":return(t.title||"").localeCompare(l.title||"");case"title-desc":return(l.title||"").localeCompare(t.title||"");default:return 0}}),s}),O=async()=>{try{C.value=!0,m.value="";const s=await J.getAll();f.value=s.data}catch{m.value="Failed to load properties. Please try again."}finally{C.value=!1}},oe=s=>{M.value=s,w.value=!0},se=async()=>{try{await J.delete(M.value.id),f.value=f.value.filter(s=>s.id!==M.value.id),w.value=!1,M.value=null}catch{alert("Failed to delete property. Please try again.")}},le=s=>{u.value=s,a.value={check_in_date:"",check_out_date:"",guests:1,notes:""},g.value="",D.value=!0},$=()=>{D.value=!1,u.value=null,g.value=""},R=async()=>{var s,t;try{if(P.value=!0,g.value="",_.value<=0){g.value="Check-out date must be after check-in date";return}await pe.create(u.value.id,a.value),$(),alert("Booking request submitted successfully! The host will review your request."),W.push("/bookings")}catch(l){g.value=((t=(s=l.response)==null?void 0:s.data)==null?void 0:t.error)||"Failed to create booking. Please try again."}finally{P.value=!1}},ne=(s,t)=>s?s.length>t?s.substring(0,t)+"...":s:"";return de(()=>{O()}),(s,t)=>{var B,x,V,E,G;const l=ve("router-link");return n(),r("div",fe,[e("div",ge,[e("div",me,[e("div",null,[e("h1",null,i(ee.value),1),e("p",we,i(te.value),1)]),F.value?(n(),ue(l,{key:0,to:"/properties/new",class:"btn-add"},{default:L(()=>[...t[16]||(t[16]=[e("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),c(" Add New Property ",-1)])]),_:1})):v("",!0)])]),!C.value&&!m.value&&f.value.length>0?(n(),r("div",he,[e("div",ye,[t[18]||(t[18]=e("svg",{class:"search-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>y.value=o),type:"text",placeholder:"Search by title, address, or description...",class:"search-input"},null,512),[[j,y.value]]),y.value?(n(),r("button",{key:0,onClick:t[1]||(t[1]=o=>y.value=""),class:"clear-search"},[...t[17]||(t[17]=[e("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):v("",!0)]),e("div",be,[e("div",Ce,[k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>A.value=o),class:"filter-select"},[...t[19]||(t[19]=[Z('<option value="all" data-v-8ff5ccf4>All Prices</option><option value="under100" data-v-8ff5ccf4>Under $100</option><option value="100-200" data-v-8ff5ccf4>$100-$200</option><option value="200-400" data-v-8ff5ccf4>$200-$400</option><option value="over400" data-v-8ff5ccf4>Over $400</option>',5)])],512),[[H,A.value]]),t[20]||(t[20]=e("svg",{class:"dropdown-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),e("div",Me,[k(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>S.value=o),class:"filter-select"},[...t[21]||(t[21]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)])],512),[[H,S.value]]),t[22]||(t[22]=e("svg",{class:"dropdown-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),e("div",_e,[k(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>T.value=o),class:"filter-select"},[...t[23]||(t[23]=[Z('<option value="recent" data-v-8ff5ccf4>Recent</option><option value="price-low" data-v-8ff5ccf4>Price: Low to High</option><option value="price-high" data-v-8ff5ccf4>Price: High to Low</option><option value="title-asc" data-v-8ff5ccf4>Title: A-Z</option><option value="title-desc" data-v-8ff5ccf4>Title: Z-A</option>',5)])],512),[[H,T.value]]),t[24]||(t[24]=e("svg",{class:"dropdown-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),e("div",Be,[e("button",{onClick:t[5]||(t[5]=o=>b.value="grid"),class:z(["toggle-btn",{active:b.value==="grid"}]),title:"Grid View"},[...t[25]||(t[25]=[e("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),e("button",{onClick:t[6]||(t[6]=o=>b.value="list"),class:z(["toggle-btn",{active:b.value==="list"}]),title:"List View"},[...t[26]||(t[26]=[e("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])],2)])])])):v("",!0),!C.value&&!m.value&&f.value.length>0?(n(),r("div",xe,[e("span",Ve,i(I.value.length)+" properties found",1)])):v("",!0),C.value?(n(),r("div",je,[...t[27]||(t[27]=[e("div",{class:"spinner-large"},null,-1),e("p",null,"Loading your properties...",-1)])])):m.value?(n(),r("div",Pe,[t[28]||(t[28]=e("svg",{class:"error-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",null,i(m.value),1),e("button",{onClick:O,class:"btn-retry"},"Try Again")])):f.value.length===0?(n(),r("div",Ae,[t[30]||(t[30]=e("div",{class:"empty-icon"},"ðŸ ",-1)),t[31]||(t[31]=e("h3",null,"No properties yet",-1)),t[32]||(t[32]=e("p",null,"Start earning by adding your first property listing!",-1)),q(l,{to:"/properties/new",class:"btn-primary"},{default:L(()=>[...t[29]||(t[29]=[e("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),c(" Add Your First Property ",-1)])]),_:1})])):(n(),r("div",{key:5,class:z(["properties-container",b.value==="list"?"properties-list":"properties-grid"])},[(n(!0),r(Q,null,ce(I.value,o=>(n(),r("div",{key:o.id,class:z(["property-card",b.value==="list"?"list-card":""])},[e("div",$e,[o.images&&o.images.length>0?(n(),r("div",{key:0,class:"property-image",style:Y({backgroundImage:`url(${o.images[0]})`})},[...t[33]||(t[33]=[e("div",{class:"image-overlay"},null,-1)])],4)):(n(),r("div",Le,[...t[34]||(t[34]=[e("div",{class:"placeholder-icon"},"ðŸ ",-1)])])),t[35]||(t[35]=e("div",{class:"property-badge"},[e("svg",{class:"badge-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),c(" Active ")],-1))]),e("div",ze,[e("div",De,[e("h3",Fe,i(o.title),1),e("div",Se,[e("span",Te,"A$"+i(o.price),1),t[36]||(t[36]=e("span",{class:"price-unit"},"/night",-1))])]),e("div",He,[t[37]||(t[37]=e("svg",{class:"location-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("span",null,i(o.address),1)]),e("p",qe,i(ne(o.description,120)),1),e("div",Ne,[e("div",Ue,[t[38]||(t[38]=e("svg",{class:"stat-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,i(o.bookings_count||0)+" bookings",1)]),e("div",Ie,[t[39]||(t[39]=e("svg",{class:"stat-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),e("span",null,i(o.views||0)+" views",1)])]),e("div",Oe,[q(l,{to:`/properties/${o.id}`,class:"btn-action btn-view"},{default:L(()=>[...t[40]||(t[40]=[e("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),c(" View Details ",-1)])]),_:1},8,["to"]),F.value?v("",!0):(n(),r("button",{key:0,onClick:re=>le(o),class:"btn-action btn-book"},[...t[41]||(t[41]=[e("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),c(" Book Now ",-1)])],8,Re)),F.value?(n(),r(Q,{key:1},[q(l,{to:`/properties/${o.id}/edit`,class:"btn-action btn-edit"},{default:L(()=>[...t[42]||(t[42]=[e("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),c(" Edit ",-1)])]),_:1},8,["to"]),e("button",{onClick:re=>oe(o),class:"btn-action btn-delete"},[...t[43]||(t[43]=[e("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),c(" Delete ",-1)])],8,Ee)],64)):v("",!0)])])],2))),128))],2)),w.value?(n(),r("div",{key:6,class:"modal-overlay",onClick:t[10]||(t[10]=o=>w.value=!1)},[e("div",{class:"modal",onClick:t[9]||(t[9]=N(()=>{},["stop"]))},[e("div",Ge,[t[45]||(t[45]=e("h3",null,"Delete Property",-1)),e("button",{onClick:t[7]||(t[7]=o=>w.value=!1),class:"modal-close"},[...t[44]||(t[44]=[e("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ze,[e("p",null,[t[46]||(t[46]=c("Are you sure you want to delete ",-1)),e("strong",null,i((B=M.value)==null?void 0:B.title),1),t[47]||(t[47]=c("?",-1))]),t[48]||(t[48]=e("p",{class:"warning-text"},"This action cannot be undone.",-1))]),e("div",Qe,[e("button",{onClick:t[8]||(t[8]=o=>w.value=!1),class:"btn-cancel"},"Cancel"),e("button",{onClick:se,class:"btn-confirm-delete"},"Delete Property")])])])):v("",!0),D.value?(n(),r("div",{key:7,class:"modal-overlay",onClick:$},[e("div",{class:"modal booking-modal",onClick:t[15]||(t[15]=N(()=>{},["stop"]))},[e("div",Ye,[e("h3",null,"Book "+i((x=u.value)==null?void 0:x.title),1),e("button",{onClick:$,class:"modal-close"},[...t[49]||(t[49]=[e("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Je,[e("div",Ke,[(V=u.value)!=null&&V.images&&u.value.images.length>0?(n(),r("div",{key:0,class:"booking-image",style:Y({backgroundImage:`url(${u.value.images[0]})`})},null,4)):v("",!0),e("div",We,[e("p",Xe,i((E=u.value)==null?void 0:E.address),1),e("p",et,[e("strong",null,"A$"+i((G=u.value)==null?void 0:G.price),1),t[50]||(t[50]=c("/night",-1))])])]),e("form",{onSubmit:N(R,["prevent"]),class:"booking-form"},[e("div",tt,[t[51]||(t[51]=e("label",null,"Check-in Date",-1)),k(e("input",{type:"date","onUpdate:modelValue":t[11]||(t[11]=o=>a.value.check_in_date=o),required:"",min:U.value,class:"form-input"},null,8,ot),[[j,a.value.check_in_date]])]),e("div",st,[t[52]||(t[52]=e("label",null,"Check-out Date",-1)),k(e("input",{type:"date","onUpdate:modelValue":t[12]||(t[12]=o=>a.value.check_out_date=o),required:"",min:a.value.check_in_date||U.value,class:"form-input"},null,8,lt),[[j,a.value.check_out_date]])]),e("div",nt,[t[53]||(t[53]=e("label",null,"Number of Guests",-1)),k(e("input",{type:"number","onUpdate:modelValue":t[13]||(t[13]=o=>a.value.guests=o),required:"",min:"1",placeholder:"1",class:"form-input"},null,512),[[j,a.value.guests]])]),e("div",rt,[t[54]||(t[54]=e("label",null,"Special Requests (Optional)",-1)),k(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=o=>a.value.notes=o),rows:"3",placeholder:"Any special requirements or requests...",class:"form-input"},null,512),[[j,a.value.notes]])]),g.value?(n(),r("div",it,i(g.value),1)):v("",!0),_.value>0?(n(),r("div",at,[e("span",null,"Total for "+i(_.value)+" night(s):",1),e("strong",null,"A$"+i(X.value),1)])):v("",!0)],32)]),e("div",dt,[e("button",{onClick:$,class:"btn-cancel"},"Cancel"),e("button",{onClick:R,disabled:P.value,class:"btn-confirm-book"},i(P.value?"Booking...":"Confirm Booking"),9,ut)])])])):v("",!0)])}}},kt=ie(vt,[["__scopeId","data-v-8ff5ccf4"]]);export{kt as default};
